FROM node:lts-alpine

WORKDIR /usr/src/app

ARG DB_HOST
ARG DB_USER
ARG DB_PASSWORD
ARG DB_DATABASE
ARG CLIENT_ID
ARG CLIENT_SECRET
ARG BOT_TOKEN

ENV DB_HOST=$DB_HOST
ENV DB_USER=$DB_USER
ENV DB_PASSWORD=$DB_PASSWORD
ENV DB_DATABASE=$DB_DATABASE
ENV CLIENT_ID=$CLIENT_ID
ENV CLIENT_SECRET=$CLIENT_SECRET
ENV BOT_TOKEN=$BOT_TOKEN
ENV PORT=3000

COPY package*.json ./

RUN npm install

COPY . .

CMD [ "node", "index.js" ]